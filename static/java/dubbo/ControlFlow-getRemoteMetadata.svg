<?xml version="1.0"?>
<svg width="1796" height="1209" xmlns="http://www.w3.org/2000/svg" version="1.1">
 <polygon points="4,1205 4,4 1793,4 1793,1205 4,1205" stroke-opacity="0.000000" stroke="#fffffe" fill-opacity="0.000000" fill="#fffffe"/>
 <polygon points="801,4 747,4 747,40 801,40 801,4" stroke="#90c4e4" fill="none"/>
 <text x="760" y="26" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">start</text>
 <polygon points="1050,77 498,77 498,133 1050,133 1050,77" stroke="#90c4e4" fill="none"/>
 <text x="507" y="93" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">ServiceInstance instance = selectInstance(instances);</text>
 <text x="507" y="109" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">String metadataType = ServiceInstanceMetadataUtils.getMetadataStorageType(instance);</text>
 <text x="507" y="125" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">MetadataInfo metadataInfo;</text>
 <path d="M 774 40 C 774 49, 774 60, 774 71" stroke="#4e8cb9" fill="none"/>
 <polygon points="776,71 774,76 772,71 776,71" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="801,188 788,170 761,170 747,188 761,206 788,206 801,188" stroke="#90c4e4" fill="none"/>
 <text x="765" y="192" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">try</text>
 <path d="M 774 133 C 774 143, 774 154, 774 164" stroke="#4e8cb9" fill="none"/>
 <polygon points="776,164 774,169 772,164 776,164" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="636,243 468,261 636,279 805,261 636,243" stroke="#90c4e4" fill="none"/>
 <text x="555" y="265" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">(logger.isDebugEnabled())</text>
 <path d="M 755 199 C 733 210, 696 229, 669 243" stroke="#4e8cb9" fill="none"/>
 <polygon points="671,245 665,246 669,242 671,245" stroke="#4e8cb9" fill="#4e8cb9"/>
 <ellipse cx="1067" cy="261" rx="91" ry="18" stroke="#90c4e4" fill="none"/>
 <text x="1008" y="265" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">catch (Exception e)</text>
 <path d="M 797 194 C 841 205, 940 229, 1005 245" stroke="#4e8cb9" fill="none"/>
 <polygon points="1006,244 1010,246 1005,247 1006,244" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="600,331 4,331 4,367 600,367 600,331" stroke="#90c4e4" fill="none"/>
 <text x="12" y="353" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">logger.debug(&quot;Instance &quot; + instance.getAddress() + &quot; is using metadata type &quot; + metadataType);</text>
 <path d="M 588 274 C 533 289, 440 312, 376 329" stroke="#4e8cb9" fill="none"/>
 <text x="499" y="309" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">yes</text>
 <polygon points="376,331 371,331 375,328 376,331" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="603,443 229,461 603,479 978,461 603,443" stroke="#90c4e4" fill="none"/>
 <text x="414" y="465" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">(REMOTE_METADATA_STORAGE_TYPE.equals(metadataType))</text>
 <path d="M 633 279 C 627 314, 614 397, 607 437" stroke="#4e8cb9" fill="none"/>
 <text x="625" y="353" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">no</text>
 <polygon points="609,437 606,442 605,437 609,437" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="1793,385 651,385 651,425 1793,425 1793,385" stroke="#90c4e4" fill="none"/>
 <text x="660" y="401" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">logger.error(REGISTRY_FAILED_LOAD_METADATA, &quot;&quot;, &quot;&quot;, &quot;Failed to get app metadata for revision &quot; + revision + &quot; for type &quot; + metadataType + &quot; from instance &quot; + instance.getAddress(), e);</text>
 <text x="660" y="417" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">metadataInfo = null;</text>
 <path d="M 1086 279 C 1113 304, 1166 352, 1197 381" stroke="#4e8cb9" fill="none"/>
 <polygon points="1198,379 1200,384 1195,382 1198,379" stroke="#4e8cb9" fill="#4e8cb9"/>
 <path d="M 350 367 C 406 388, 499 422, 556 443" stroke="#4e8cb9" fill="none"/>
 <polygon points="556,441 560,445 555,445 556,441" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="659,585 162,585 162,621 659,621 659,585" stroke="#90c4e4" fill="none"/>
 <text x="170" y="607" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">metadataInfo = MetadataUtils.getMetadata(revision, instance, metadataReport);</text>
 <path d="M 581 478 C 545 504, 477 553, 439 581" stroke="#4e8cb9" fill="none"/>
 <text x="555" y="509" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">yes</text>
 <polygon points="440,583 435,585 438,580 440,583" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="777,531 568,531 568,567 777,567 777,531" stroke="#90c4e4" fill="none"/>
 <text x="576" y="553" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">ProxyHolder proxyHolder = null;</text>
 <path d="M 616 479 C 627 492, 643 511, 655 526" stroke="#4e8cb9" fill="none"/>
 <text x="644" y="509" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">no</text>
 <polygon points="656,525 658,530 654,527 656,525" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="800,935 655,953 800,971 945,953 800,935" stroke="#90c4e4" fill="none"/>
 <text x="732" y="957" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">(metadataInfo == null)</text>
 <path d="M 400 621 C 390 639, 378 667, 378 693 C 378 693, 378 693, 378 881 C 378 914, 580 935, 704 945" stroke="#4e8cb9" fill="none"/>
 <polygon points="704,944 709,946 704,947 704,944" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="748,657 735,639 708,639 694,657 708,675 735,675 748,657" stroke="#90c4e4" fill="none"/>
 <text x="712" y="661" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">try</text>
 <path d="M 680 567 C 688 585, 701 613, 711 633" stroke="#4e8cb9" fill="none"/>
 <polygon points="713,632 713,638 709,634 713,632" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="842,1023 602,1023 602,1059 842,1059 842,1023" stroke="#90c4e4" fill="none"/>
 <text x="610" y="1045" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">metadataInfo = MetadataInfo.EMPTY;</text>
 <path d="M 786 969 C 774 983, 755 1003, 742 1019" stroke="#4e8cb9" fill="none"/>
 <text x="767" y="1001" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">yes</text>
 <polygon points="744,1019 739,1022 741,1017 744,1019" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="871,1096 729,1096 729,1132 871,1132 871,1096" stroke="#90c4e4" fill="none"/>
 <text x="737" y="1118" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">return metadataInfo;</text>
 <path d="M 816 969 C 828 982, 844 1002, 851 1023 C 856 1038, 857 1044, 851 1059 C 846 1071, 837 1083, 827 1092" stroke="#4e8cb9" fill="none"/>
 <text x="856" y="1045" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">no</text>
 <polygon points="829,1093 824,1095 827,1090 829,1093" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="1194,712 407,712 407,752 1194,752 1194,712" stroke="#90c4e4" fill="none"/>
 <text x="415" y="728" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">proxyHolder = MetadataUtils.referProxy(instance);</text>
 <text x="415" y="744" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">metadataInfo = proxyHolder.getProxy().getMetadataInfo(ServiceInstanceMetadataUtils.getExportedServicesRevision(instance));</text>
 <path d="M 737 672 C 748 682, 762 696, 775 708" stroke="#4e8cb9" fill="none"/>
 <polygon points="776,706 778,711 773,709 776,706" stroke="#4e8cb9" fill="#4e8cb9"/>
 <ellipse cx="800" cy="807" rx="37" ry="18" stroke="#90c4e4" fill="none"/>
 <text x="781" y="811" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">finally</text>
 <path d="M 800 752 C 800 762, 800 773, 800 783" stroke="#4e8cb9" fill="none"/>
 <polygon points="802,783 800,788 798,783 802,783" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="935,862 665,862 665,898 935,898 935,862" stroke="#90c4e4" fill="none"/>
 <text x="673" y="884" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">MetadataUtils.destroyProxy(proxyHolder);</text>
 <path d="M 800 825 C 800 835, 800 846, 800 856" stroke="#4e8cb9" fill="none"/>
 <polygon points="802,856 800,861 798,856 802,856" stroke="#4e8cb9" fill="#4e8cb9"/>
 <path d="M 800 898 C 800 908, 800 919, 800 929" stroke="#4e8cb9" fill="none"/>
 <polygon points="802,929 800,934 798,929 802,929" stroke="#4e8cb9" fill="#4e8cb9"/>
 <path d="M 1222 425 C 1222 445, 1222 477, 1222 504 C 1222 504, 1222 504, 1222 881 C 1222 914, 1021 935, 896 945" stroke="#4e8cb9" fill="none"/>
 <polygon points="896,947 891,946 896,944 896,947" stroke="#4e8cb9" fill="#4e8cb9"/>
 <path d="M 741 1059 C 752 1069, 765 1081, 777 1092" stroke="#4e8cb9" fill="none"/>
 <polygon points="778,1090 780,1095 775,1093 778,1090" stroke="#4e8cb9" fill="#4e8cb9"/>
 <polygon points="827,1169 773,1169 773,1205 827,1205 827,1169" stroke="#90c4e4" fill="none"/>
 <text x="789" y="1191" fill="#000000" font-family=".AppleSystemUIFont" font-size="13">end</text>
 <path d="M 800 1132 C 800 1142, 800 1153, 800 1163" stroke="#4e8cb9" fill="none"/>
 <polygon points="802,1163 800,1168 798,1163 802,1163" stroke="#4e8cb9" fill="#4e8cb9"/>
</svg>
